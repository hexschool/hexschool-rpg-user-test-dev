import{_ as v,u as y,q as k,f as I,r as d,o as x,h as S,w,j as V,a as e,l as m,n as R,m as T,p as L,s as M,t as C,i as E,d as F}from"./index.05d1aa2e.js";const r=i=>(M("data-v-f753d7f1"),i=i(),C(),i),q=r(()=>e("h1",{class:"h2 mb-3"}," \u767B\u5165\u6210\u529F ",-1)),N=r(()=>e("p",{class:"mb-4 text-dark"}," \u8ACB\u81F3\u65B9\u624D\u8A3B\u518A\u7684 Email \u4FE1\u7BB1\u6536\u53D6\u9A57\u8B49\u4FE1\uFF0C \u53EF\u9EDE\u64CA\u9A57\u8B49\u9023\u7D50\u767B\u5165\uFF0C\u6216\u5728\u4E0B\u65B9\u8F38\u5165\u9A57\u8B49\u78BC ",-1)),$={class:"mb-4"},z=r(()=>e("label",{for:"validation",class:"form-label"},"\u9A57\u8B49\u78BC",-1)),B=["disabled"],U=r(()=>e("p",{class:"text-center text-dark"},[e("small",null,"\u9084\u6C92\u6709\u6536\u5230\u9A57\u8B49\u78BC\u55CE\uFF1F\u806F\u7D61\u5C0F\u5E6B\u624B")],-1)),j=r(()=>e("div",{class:"d-flex justify-content-center"},[e("a",{href:"https://line.me/R/ti/p/%40guv7422g",target:"_blank",title:"LINE \u5BA2\u670D",class:"rounded-circle bg-light text-dark me-4"}," LINE "),e("a",{href:"https://m.me/hexschool",target:"_blank",title:"Facebook \u5BA2\u670D",class:"rounded-circle bg-light text-dark"}," f ")],-1)),A={__name:"LoginVerify",setup(i){const{apiPutLoginVerify:u,apiGetLoginTeachable:p}=E,_=y(),s=k({verify_code:""});I(()=>{const t=localStorage.getItem("d_RTfznkkwslIopaqd_account");t?s.account=decodeURIComponent(t):_.push("/login")});const f=({name:t,value:o,expires:a})=>{document.cookie=`${t}=${o};${F()};${a?`expires=${a}`:""}`},g=async()=>{localStorage.removeItem("d_RTfznkkwslIopaqd_account");const t=localStorage.getItem("h_redirect"),o=localStorage.getItem("t_redirectType"),a=localStorage.getItem("t_redirectRoute");if(t)localStorage.removeItem("h_redirect"),window.location.assign(t);else if(o&&a){const c={redirectType:"user"};o==="teachable"&&(c.redirectType=o,c.route=a),localStorage.removeItem("t_redirectType"),localStorage.removeItem("t_redirectRoute");const n=new URLSearchParams(c).toString(),l=await p(n);window.location.href=l.redirect_url}else _.push("/user")},h=T(async()=>{const{access_token:t,expiration:o}=await u(s);f({name:"h_MqhC49RxFRI6pR3Z_token",value:t,expires:new Date(o*1e3)}),L.toastMessage("success","","\u9A57\u8B49\u6210\u529F"),g()});return(t,o)=>{const a=d("VField"),c=d("ErrorMessage"),n=d("VForm");return x(),S(n,{ref:"form",onSubmit:V(h)},{default:w(({errors:l})=>[q,N,e("div",$,[z,e("div",null,[m(a,{id:"validation",modelValue:s.verify_code,"onUpdate:modelValue":o[0]||(o[0]=b=>s.verify_code=b),modelModifiers:{trim:!0},name:"verify_code",label:"\u9A57\u8B49\u78BC",type:"text",class:R(["form-control",{"is-invalid":l.verify_code}]),rules:"required|digits:6","aria-label":"\u9A57\u8B49\u78BC","aria-describedby":"button-addon2"},null,8,["modelValue","class"]),m(c,{name:"verify_code",class:"invalid-feedback"})])]),e("button",{type:"submit",class:"btn btn-primary w-100 mb-3",disabled:!s.verify_code}," \u9A57\u8B49\u5E33\u865F ",8,B),U,j]),_:1},8,["onSubmit"])}}},G=v(A,[["__scopeId","data-v-f753d7f1"]]);export{G as default};
